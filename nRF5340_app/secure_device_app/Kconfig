# Copyright (c) 2021 Nordic Semiconductor ASA
# SPDX-License-Identifier: Apache-2.0

#
# Enable the customized source
#
config MCUMGR_SMP_BT_CUSTOM
	bool "Bluetooth mcumgr SMP transport"
	select BT
	select BT_PERIPHERAL
	select BT_GATT_DYNAMIC_DB
	help
	  Enables handling of SMP commands received over Bluetooth.

if MCUMGR_SMP_BT_CUSTOM

config MCUMGR_SMP_BT_AUTHEN
	bool "Authenticated requirement for Bluetooth mcumgr SMP transport"
	select BT_SMP
	default y
	help
	  Enables encrypted and authenticated connection requirement to
	  Bluetooth SMP transport.

config MCUMGR_SMP_BT_LATENCY_CONTROL
	bool "Request low latency connection when handling SMP commands"
	depends on SYSTEM_WORKQUEUE_PRIORITY < 0
	help
	  Enables support for requesting low latency connection parameter when
	  SMP commands are handled. This option allows to speed up the command
	  exchange process.
	  Its recommended to enable this if SMP is used for DFU.

config MCUMGR_SMP_BT_LATENCY_CONTROL_DEFAULT_LATENCY
	int "Default value for connection latency"
	depends on MCUMGR_SMP_BT_LATENCY_CONTROL
	default BT_PERIPHERAL_PREF_LATENCY if BT_GAP_PERIPHERAL_PREF_PARAMS
	default 99
	range 0 499
	help
	  The value is a default connection latency that is used when restoring
	  from low latency mode.

config MCUMGR_SMP_BT_LATENCY_CONTROL_RESTORE_TIME
	int "Connection latency restore time in milliseconds"
	depends on MCUMGR_SMP_BT_LATENCY_CONTROL
	default 5000
	range 1 65535
	help
	  The value is a time after which connection latency is restored
	  to default value
	  (:kconfig:`MCUMGR_SMP_BT_LATENCY_CONTROL_DEFAULT_LATENCY`). Latency
	  restoration time could take up to twice as long as specified time.
	  This is because of limiting CPU time needed to support this feature.
	  The implementation periodically checks if the low latency is still
	  needed every :kconfig:`MCUMGR_SMP_BT_LATENCY_CONTROL_RESTORE_TIME`.
	  The default latency is restored during check only if there was no SMP
	  command exchanged in period before the check

config MCUMGR_SMP_BT_LATENCY_CONTROL_RESTORE_RETRY_TIME
	int "Connection latency restore retry time in milliseconds"
	depends on MCUMGR_SMP_BT_LATENCY_CONTROL
	default 1000
	range 1 5000
	help
	  In case connection latency restoration fails due to an error, this
	  option specifies the time after retry to set the default latency
	  (:kconfig:`MCUMGR_SMP_BT_LATENCY_CONTROL_DEFAULT_LATENCY`) would be
	  executed.

endif # MCUMGR_SMP_BT_CUSTOM

#
# Application settings
#
config APP_SETTINGS_BUFFER_SIZE
	int "Read buffer size for app_settings"
	default 128
	depends on SETTINGS && SETTINGS_NVS
	help
	  Size of buffer for reading data from NVS

#
# Enable ATECC608A
#
config USE_ATECC608A
	bool "Use ATECC608A"
	default n
	help
	  Enables using of ATECC608A as EC crypto hardware

source "Kconfig.zephyr"
