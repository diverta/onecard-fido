# ATECC608Aの設定カスタマイズについて

セキュリティーIC「ATECC608A」の設定カスタマイズについて記載いたします。

## カスタマイズ設定

下表は、FIDO機能を実現するために、必要となる設定カスタマイズの内容になります。

| # |SlotConfig|KeyConfig| 目的 |説明|
|:---:|:---:|:---:|:---:|:---|
|0〜7|0x2083|0x0033|秘密鍵|カスタム秘密鍵を収容。[注1]<br>将来の仕様拡張時に利用できます。|
|8|0x0000|0x003C|データ|データ保管用の領域。<br>後述「8番スロットのデータ配置」ご参照|
|9|0x2087|0x0033|秘密鍵|ECDH共通鍵生成時に利用できるカスタム秘密鍵を収容。[注1]<br>将来の仕様拡張時に利用できます。|
|10〜13|0x2083|0x0033|秘密鍵|カスタム秘密鍵を収容。[注1]<br>将来の仕様拡張時に利用できます。|
|14|0x6F83|0x0033|秘密鍵|FIDO認証器固有の秘密鍵を収容。[注1]<br>WebAuthnユーザー登録時の署名に使用されます。<br>管理ツールによる秘密鍵インストールの度に上書き更新されます。|
|15|0x0F8F|0x003C|データ|14番スロットを暗号化するためのキーを収容。[注1]<br>管理ツールで転送されたサイト固有の秘密鍵を、このスロットの<br>キーより内部生成された鍵で暗号化し、14番スロットに格納します。<br>管理ツールによる秘密鍵インストールの度に上書き更新されます。|

[注1] このスロットに書き込まれた内容は、いかなる方法によっても参照できません。

#### 8番スロットのデータ配置

8番スロットには、以下のような配置でデータ（416バイト）が保管されます。

| # |オフセット|バイト数| 目的 |説明|
|:---:|:---:|:---:|:---|:---|
|1|0|32|ハッシュ生成キー|HMAC-SHA-256ハッシュ生成用のキーを一時収容。<br>将来の仕様拡張時に利用できます。|
|2|32|32|AESパスワード|キーハンドル（U2F）／クレデンシャルID（CTAP2）といった<br>機密データを暗号化／復号化するためのAESパスワードを収容。<br>管理ツールによる秘密鍵インストール時に新規生成のうえ、<br>上書き更新されます。|
|3|64|352|未使用||

## ご参考：デフォルト設定

下表は、「ATECC608A」工場出荷時（デフォルト）の設定内容になります。

| # |SlotConfig|KeyConfig| 目的 |説明|
|:---:|:---:|:---:|:---:|:---|
|0|0x2083|0x0033|秘密鍵|一般的な秘密鍵として使用される想定 |
|1|0x2087|0x0033|秘密鍵|一般的な秘密鍵として使用される想定<br>ECDH共通鍵を生成できる権限が付与されています。 |
|2|0x208F|0x0033|秘密鍵|ECDH共通鍵を生成するために使用される想定。<br>生成された共通鍵は、3番スロットに収容されます。|
|3|0x8FC4|0x001C|データ|データを読み出す場合、15番スロットの鍵を使用して復号化します。 |
|4|0x8F8F|0x001C|データ|Write／Read権限なし |
|5|0x8F8F|0x001C|データ|同上 |
|6|0x8F9F|0x001C|データ|同上 |
|7|0x8FAF|0x001C|データ|Write権限なし、Read権限あり |
|8〜14|0x0000|0x003C|データ|Write／Read権限あり。暗号化しないデータを収容する想定 |
|15|0x8FAF|0x001C|データ|データを暗号化するために使用する鍵を収容 |
