# PINコードの設定手順

## 概要

[FIDO認証器管理ツール](README.md)を使用して、[nRF52840版FIDO認証器](https://github.com/diverta/onecard-fido/tree/master/nRF5_SDK_v15.2.0)にPINコード（暗証番号）を設定する手順を掲載します。

## 管理ツールのインストール

[インストール手順](INSTALLPRG.md)を参照し、管理ツールをmacOSにインストールします。

## PINコードの設定

管理ツールにより、PINコード（暗証番号）の新規設定と変更ができます。

### PINコードの新規設定

管理ツールを起動し、USBポートに[nRF52840版FIDO認証器](https://github.com/diverta/onecard-fido/tree/master/nRF5_SDK_v15.2.0)を装着します。<br>
その後「PINコード設定」ボタンをクリックします。

<img src="assets/0013.png" width="400">

「PINコード設定」画面がポップアップ表示されます。

「新しいPINコード」欄に、今回使用するPINコード（暗証番号）を半角数字で入力します。<br>
その下の「新しいPINコード(確認)」欄にも、同じ値を半角数字で入力します。<br>
その後「新規設定」ボタンをクリックします。

<img src="assets/0014.png" width="400">

画面上に入力されたPINコードが、認証器に登録されます。<br>
程なく、下図のようなポップアップ画面が表示され、処理が完了します。

<img src="assets/0015.png" width="400">

これで、PINコードの新規設定は完了です。

### PINコードの変更

いったん設定されたPINコードを変更したい場合は、新規設定時と同様「PINコード設定」ボタンをクリックます。

<img src="assets/0013.png" width="400">

「PINコード設定」画面がポップアップ表示されます。

「新しいPINコード」欄に、変更後のPINコード（暗証番号）を半角数字で入力します。<br>
その下の「新しいPINコード(確認)」欄にも、同じく変更後のPINコードを半角数字で入力します。<br>
最後に「変更前のPINコード」欄に、変更前のPINコードを半角数字で入力します。<br>
その後「変更」ボタンをクリックします。

<img src="assets/0016.png" width="400">

画面上に入力された変更後のPINコードが、認証器に登録されます。<br>
程なく、下図のようなポップアップ画面が表示され、処理が完了します。

<img src="assets/0017.png" width="400">

これで、PINコードの変更は完了です。

## PINコードの解除

管理ツールにより、認証器に設定されたPINコード（暗証番号）の解除ができます。

### 注意事項

PINコードを解除する場合は、認証器に登録されているユーザー情報やログイン情報も、同時に削除します。

したがって、PINコード解除後は、U2F／WebAuthnによるサイトへの再ログインができなくなりますので、ご注意ください。

### 解除手順

PINコードを解除したい場合は、管理ツール画面の「PINコード設定」ボタンをクリックます。

<img src="assets/0013.png" width="400">

「PINコード設定」画面がポップアップ表示されますので、画面下部の「解除」ボタンをクリックします。

<img src="assets/0024.png" width="400">

確認ダイアログが表示されます。<br>
処理を続行したい場合は「Yes」をクリックします。

<img src="assets/0025.png" width="400">

管理ツール画面下部のメッセージ表示欄に、ユーザー確認が必要な旨のガイダンスが表示されます。

<img src="assets/0026.png" width="400">

認証器上のLEDが高速点滅するので、認証器上のMAIN SW（タクトスイッチ）を１回プッシュしてください。

<img src="assets/0018.png" width="400">

程なく、下図のようなポップアップ画面が表示され、処理が完了します。

<img src="assets/0027.png" width="400">

これで、PINコードの解除は完了です。
